@page "/menu"
@using BlazorA.Service;
@using DemoModel.Models;
@inject IAuthProductServices productServices;
@layout UserLayout
@inject NavigationManager NavigationManger;
<PageTitle>Menu</PageTitle>

<main id="main" class="d-flex">
    <!-- ======= Menu Section ======= -->
    <section id="menu" class="menu col-lg-9">
        <div class="container" data-aos="fade-up">
            <div class="section-header">
                <p>Check Our <span>Yummy Menu</span></p>
            </div>
            <ul class="nav nav-tabs d-flex justify-content-center" data-aos="fade-up" data-aos-delay="200">

                <li class="nav-item">
                    <a class="nav-link active show" data-bs-toggle="tab" data-bs-target="#menu-starters" @onclick='() => OnClickTab("Starters")'>
                        <h4>Starters</h4>
                    </a>
                </li><!-- End tab nav item -->

                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" data-bs-target="#menu-breakfast" @onclick='() => OnClickTab("Breakfast")'>
                        <h4>Breakfast</h4>
                    </a><!-- End tab nav item -->
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" data-bs-target="#menu-lunch" @onclick='() => OnClickTab("Lunch")'>
                        <h4>Lunch</h4>
                    </a>
                </li><!-- End tab nav item -->

                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" data-bs-target="#menu-dinner" @onclick='() => OnClickTab("Dinner")'>
                        <h4>Dinner</h4>
                    </a>
                </li><!-- End tab nav item -->

            </ul>
            <div class="tab-content" data-aos="fade-up" data-aos-delay="300">
                <!-- start Starter Menu Content -->
                <div class="tab-pane fade active show" id="menu-starters">
                    <div class="tab-header text-center">
                        <p>Menu</p>
                        <h3>Starters</h3>
                    </div>
                    <div class="row gy-5">
                        @foreach (var pro in products)
                        {
                            <div class="col-lg-4 menu-item">
                                <a href="/ditials/@pro.ProductID" class=" glightbox"><img src="data:image/jpeg;base64,@Convert.ToBase64String(pro.ImageData)" class="menu-img img-fluid" alt="Resturant Product"></a>
                                <h4>@pro.Name</h4>
                                <p class="ingredients">
                                    @pro.Description
                                </p>
                                <p class="price">
                                    @pro.Price
                                </p>
                                <button type="button" class="btn btn-outline-success">Add to Cart</button>
                            </div>
                        }
                    </div>
                </div>
                <!-- End Starter Menu Content -->
                <div class="tab-pane fade" id="menu-breakfast">
                    <div class="tab-header text-center">
                        <p>Menu</p>
                        <h3>Breakfast</h3>
                    </div>
                    <div class="row gy-5">
                        @foreach (var pro in products)
                        {
                            <div class="col-lg-4 menu-item">
                                <a href="/ditials/@pro.ProductID" class=" glightbox"><img src="data:image/jpeg;base64,@Convert.ToBase64String(pro.ImageData)" class="menu-img img-fluid" alt="Resturant Product"></a>
                                <h4>@pro.Name</h4>
                                <p class="ingredients">
                                    @pro.Description
                                </p>
                                <p class="price">
                                    @pro.Price
                                </p>
                                <button type="button" class="btn btn-outline-success">Add to Cart</button>
                            </div>
                        }
                    </div>
                </div><!-- End Breakfast Menu Content -->

                <div class="tab-pane fade" id="menu-lunch">

                    <div class="tab-header text-center">
                        <p>Menu</p>
                        <h3>Lunch</h3>
                    </div>

                    <div class="row gy-5">
                        @foreach (var pro in products)
                        {
                            <div class="col-lg-4 menu-item">
                                <a href="/ditials/@pro.ProductID" class=" glightbox"><img src="data:image/jpeg;base64,@Convert.ToBase64String(pro.ImageData)" class="menu-img img-fluid" alt="Resturant Product"></a>
                                <h4>@pro.Name</h4>
                                <p class="ingredients">
                                    @pro.Description
                                </p>
                                <p class="price">
                                    @pro.Price
                                </p>
                                <button type="button" class="btn btn-outline-success">Add to Cart</button>
                            </div>
                        }
                    </div>
                </div><!-- End Lunch Menu Content -->

                <div class="tab-pane fade" id="menu-dinner">

                    <div class="tab-header text-center">
                        <p>Menu</p>
                        <h3>Dinner</h3>
                    </div>

                    <div class="row gy-5">
                        @foreach (var pro in products)
                        {
                            <div class="col-lg-4 menu-item">
                                <a href="/ditials/@pro.ProductID" class=" glightbox"><img src="data:image/jpeg;base64,@Convert.ToBase64String(pro.ImageData)" class="menu-img img-fluid" alt="Resturant Product"></a>
                                <h4>@pro.Name</h4>
                                <p class="ingredients">
                                    @pro.Description
                                </p>
                                <p class="price">
                                    @pro.Price
                                </p>
                                <button type="button" class="btn btn-outline-success">Add to Cart</button>
                            </div>
                        }
                    </div>
                </div><!-- End Dinner Menu Content -->
            </div>
        </div>
    </section><!-- End Menu Section -->
    <div class="col-lg-3" style="padding-top:320px">
        <div class="shop__sidebar">
            <div class="shop__sidebar__search">
                <form action="#">
                    <input type="text" placeholder="Search..." style="border-radius:20px">
                    <button type="submit"><span class="icon_search"></span></button>
                </form>
            </div>
            <div class="shop__sidebar__accordion">
                <div class="accordion" id="accordionExample">
                    <div class="card">
                        <div class="card-heading">
                            <a @onclick="ToggleCollapse" style="padding:5px 0px 0px 15px">Filter Price</a>
                        </div>
                        <div id="collapseThree" class="@collapseClass">
                            <div class="card-body">
                                <div class="shop__sidebar__price">
                                    <ul>
                                        <li><a href="#">$0.00 - $50.00</a></li>
                                        <li><a href="#">$50.00 - $100.00</a></li>
                                        <li><a href="#">$100.00 - $150.00</a></li>
                                        <li><a href="#">$150.00 - $200.00</a></li>
                                        <li><a href="#">$200.00 - $250.00</a></li>
                                        <li><a href="#">250.00+</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main><!-- End #main -->
@code {

    protected List<Product> products = new();
    private bool isCollapsed = false;
    private string collapseClass => isCollapsed ? "collapse" : string.Empty;

    private void ToggleCollapse()
    {
        isCollapsed = !isCollapsed;
    }
    protected override async Task OnInitializedAsync()
    {
        await GetListProductCatagory("Starters");
    }
    private async Task OnClickTab(string categoryName)
    {
        await GetListProductCatagory(categoryName);
    }
    protected async Task GetListProductCatagory(string categoryName)
    {
        products = await productServices.GetCatagoryWithName(categoryName);
    }
}
